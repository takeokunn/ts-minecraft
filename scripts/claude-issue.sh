#!/bin/bash

# =============================================================================
# Claude Agentå°‚ç”¨ Issueä½œæˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
# Claude ã‹ã‚‰ç›´æ¥å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã‚’æƒ³å®š
# =============================================================================

set -euo pipefail

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
readonly SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"

# -----------------------------------------------------------------------------
# ãƒ¡ã‚¤ãƒ³å‡¦ç†
# -----------------------------------------------------------------------------
main() {
    local request="$*"

    # å¼•æ•°ãƒã‚§ãƒƒã‚¯
    if [ -z "$request" ]; then
        echo "âŒ Error: è¦æœ›æ–‡ã‚’æŒ‡å®šã—ã¦ãã ã•ã„"
        echo "ä¾‹: claude-issue.sh editorconfig lintã‚’å°å…¥ã—ãŸã„"
        exit 1
    fi

    # Issueä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
    "${SCRIPT_DIR}/create-issue.sh" "$request"

    # æˆåŠŸæ™‚ã¯æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ¡ˆå†…
    if [ $? -eq 0 ]; then
        echo ""
        echo "ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:"
        echo "1. ä½œæˆã•ã‚ŒãŸIssueã‚’ç¢ºèª"
        echo "2. 'claude \"Issue #[ç•ªå·] ã‚’å®Ÿè£…ã—ã¦\"' ã§è‡ªå‹•å®Ÿè£…"
        echo "3. å®Ÿè£…å®Œäº†å¾Œã€'scripts/create-pr.sh [ç•ªå·]' ã§PRä½œæˆ"
    fi
}

# å®Ÿè¡Œ
main "$@"